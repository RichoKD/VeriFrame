# version: "3.8"

services:
  # starknet-devnet:
  #   image: shardlabs/starknet-devnet-rs:latest-seed0
  #   container_name: starknet-devnet
  #   ports:
  #     - "5050:5050"
  #   command: ["--gas-price", "1"]
  #   networks:
  #     - veri-frame-net

  # devnet-init:
  #   build:
  #     context: ..
  #     dockerfile: infra/devnet-init.Dockerfile
  #   depends_on:
  #     - starknet-devnet
  #   volumes:
  #     - ../contracts/job_registry:/contracts/job_registry
  #     - ./worker.env:/infra/worker.env
  #   networks:
  #     - veri-frame-net

  ipfs-node:
    image: ipfs/kubo:latest
    container_name: ipfs-node
    ports:
      - "4001:4001"       # swarm
      - "5001:5001"       # API
      - "8080:8080"       # gateway
    volumes:
      - ipfs_data:/data/ipfs
    networks:
      - veri-frame-net
    environment:
      - IPFS_API_ORIGINS=http://localhost:3000

#   worker:
#     build:
#       context: ../worker
#       dockerfile: Dockerfile
#     container_name: veri-frame-worker
#     env_file:
#       - ./worker.env
#     depends_on:
#       - devnet-init
#       - ipfs-node
#     networks:
#       - veri-frame-net
#     volumes:
#       - ../worker:/app

# volumes:
#   ipfs_data:

# networks:
#   veri-frame-net:
#     driver: bridge
